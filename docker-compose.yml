version: '3'
services:
  https-portal:
    image: steveltn/https-portal:latest
    ports:
      - '80:80'
      - '443:443'
    links:
      - hub
    restart: always
    environment:
      DOMAINS: 'selenium.example.com -> http://hub'
      STAGE: 'production'
      # FORCE_RENEW: 'true'
  hub:
    image: selenium/hub:latest
    ports:
      - '4444:4444'
    restart: always
  chrome:
    image: selenium/node-chrome:3.4.0-einsteinium
    links:
      - hub
    volumes:
      - /dev/crandom:/dev/random
    restart: always
  firefox:
    image: selenium/node-firefox:3.4.0-einsteinium
    links:
      - hub
    volumes:
      - /dev/frandom:/dev/random
    restart: always
  chrome-vnc:
    image: selenium/node-chrome-debug:3.4.0-einsteinium
    links:
      - hub
    volumes:
      - /dev/cvrandom:/dev/random
    restart: always
  firefox-vnc:
    image: selenium/node-firefox-debug:3.4.0-einsteinium
    links:
      - hub
    volumes:
      - /dev/fvrandom:/dev/random
    restart: always
